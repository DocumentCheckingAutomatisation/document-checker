\usepackage{cmap}					  % поиск в PDF
\usepackage[T2A]{fontenc}			  % кодировка выходного текста
\usepackage[utf8]{inputenc}			  % кодировка исходного текста
\usepackage[english,russian]{babel}   % локализация и переносы
\usepackage{amssymb}                  % для мат. символов
\usepackage{siunitx}                  % для мат. выражений и ед. измерения
\usepackage[a4paper, includefoot, top=15mm, bottom=15mm, right=10mm, left=25mm]{geometry}                  % поля документа
\usepackage{ragged2e}                 % для выравниваний
\usepackage{setspace}                 % межстрочный интервал
\usepackage{pdfpages}                 % Вставка pdf

\setlength{\parindent}{1.27cm}        % величина абзацного отступа
\renewcommand {\baselinestretch}{1.5} % межстрочный интервал
\usepackage{etoolbox}                % для доп. макросов

\renewcommand\normalsize{\fontsize{14}{14pt}\selectfont} % устанавливает шрифт (\normalsize) равным шрифту в 14 пунктов

%%%% Про переносы %%%%
\sloppy % не дает строке залесть на поля
\usepackage[none]{hyphenat} % убирает любые переносы слов

%%%% Гиперссылки %%%%
%\usepackage{hyperref} % для удобной навигации в процессе работы



%%%%%%%%%%%%%%%%%%%%%%%%%%% Заголовки %%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{titlesec}               % отступы у глав и разделов
\usepackage{titletoc}               % настройка глав и разделов
%%%% Настройка названия глав %%%%
\titleformat{\chapter}[block]
    {\filcenter \bfseries}     % центрируем и делаем жирным
    {\thechapter\ }            % формат нумерации
    {0em}                      % отступ после номера
    {\MakeUppercase}           % делаем заглавными
\titlespacing{\chapter}
    {0em} % отступ слева     
    {0em} % верхний отступ   
    {0em plus .2ex} % нижний
%%%% Настройка названия разделов %%%%
\titleformat{\section}[block]
    {\filright \bfseries \hspace{1.27cm}} % правый край, жир, отступ
    {\thesection\ }                       % формат нумерации
    {0em}                                 % отступ после номера
    {}
\titlespacing{\section}
    {0em} % отступ слева
    {0em} % верхний отступ
    {0em} % нижний


    
%%%%%%%%%%%%%%%%%%%%%%%%%%% Содержание %%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{tocloft} % настройка содержания

\addto\captionsrussian{\renewcommand{\contentsname}{Содержание}} % Меняем оглавление на содержание
%\renewcommand{\contentsname}{Содержание}
\renewcommand{\cftchapleader}{\cftdotfill{\cftdotsep}} % поставить .... в содержании для глав
\renewcommand{\cfttoctitlefont}{\hfill\bfseries\MakeUppercase} % делаем СОДЕРЖАНИЕ...
\renewcommand{\cftaftertoctitle}{\hfill} % ... посередине,жирным, заглавными
\renewcommand{\cftbeforetoctitleskip}{0em} % вертикальные отступы у СОДЕРЖАНИЕ
\renewcommand{\cftaftertoctitle}{\mbox{}\hfill \vspace{-3em}} % уменьшение нижнего отступа после СОДЕРЖАНИЕ 
\renewcommand{\cftsecfont}{\hspace{2em}} % отступ перед разделами
\renewcommand{\cftchapfont}{\normalsize} % Сделать заглавия глав не жирными
\renewcommand{\cftchappagefont}{\normalfont} % убираем выделение жирным для номера страницы у глав
\renewcommand{\cftdotsep}{1} % ширина разделителя между точками
\setcounter{tocdepth}{2} % глубина содержания (2х уровневая: главы и разделы)
%%%% Глобальные отступы в содержании %%%%
\renewcommand{\cftchapindent}{0em} % Отступ для глав (chapter)
\renewcommand{\cftsecindent}{0em} % Отступ для разделов (section)
\renewcommand{\cftsubsecindent}{0em} % Отступ для подразделов (subsection)
%%%% Межстрочные отступы в содержании %%%%
\renewcommand{\cftbeforechapskip}{0em} % для глав
\renewcommand{\cftbeforesecskip}{0em}  % для разделов
\renewcommand{\cftbeforesubsecskip}{0em}  % для подразделов

%%%% Учет отступа под нумерацию у главы и раздела %%%%
\setlength{\cftchapnumwidth}{0em} % ширина номера главы
\renewcommand{\cftchapaftersnumb}{\hspace{4mm}} % отступ в главе после номера и перед текстом 
\setlength{\cftsecnumwidth}{0em}  % ширина номера раздела
\renewcommand{\cftsecaftersnumb}{\hspace{7,5mm}} % отступ в разделе после номера и перед текстом 



%%%%%%%%%%%%%%%%%%%%%%%%%%%% Формулы %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Отсупы сверху и снизу формул %%%%
\setlength{\abovedisplayskip}{0em}
\setlength{\belowdisplayskip}{0em}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Списки %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{enumitem} % настройка списков

%%%% Маркированный список %%%%
\newenvironment{enummarker}{
  \begin{itemize}[label=-, nolistsep, labelwidth=1em, leftmargin=0cm, itemindent=1.7cm, listparindent=\parindent]
  \renewcommand{\labelenumii}{-{enumii})}
}{
  \end{itemize}
}

%%%% Нумерованный список с арабскими цифрами %%%%
\newenvironment{enumarabic}{
  \begin{enumerate}[label=\arabic*), nolistsep, labelwidth=3em, leftmargin=0cm, labelsep=1mm, itemindent=1.8cm, listparindent=\parindent]
}{
  \end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Списки %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{enumitem} % настройка списков

%%%% Нумерованный список с русскими строчными буквами %%%%
\newenvironment{enumasbuk}{
  \AddEnumerateCounter*{\asbuk}{\c@asbuk}{ш)}
  \begin{enumerate}[label=\asbuk*), nolistsep, labelwidth=4mm, leftmargin=0cm, labelsep=1mm, itemindent=1.8cm, listparindent=\parindent]
}{
  \end{enumerate}
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%% Рисунки %%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{graphicx}               % подключение графики
\usepackage[export]{adjustbox}      % для управления графикой
\graphicspath{ {Images/} }          % путь к рисункам
\usepackage{caption}                % настройка подписей
\usepackage{subcaption}             % настройка подписей
\usepackage{float}                  % для [H] у рисунков и таблиц

%%%% Отступ после таблицы и рисунка %%%%
\setlength{\intextsep}{1mm}

%%%% Настройка подписей рисунков %%%%
\DeclareCaptionLabelFormat{gostfigure}{Рисунок #2}
\DeclareCaptionLabelSeparator{gostfig}{~---~}
\captionsetup[figure]{labelformat=gostfigure, labelsep=gostfig, font=normalsize}
%\renewcommand{\thesubfigure}{\asbuk{subfigure}}
\captionsetup[figure]{skip=4mm, belowskip=-2mm} % верхн. нижн. отступ подписи

%%%% Функция для вставки рисунка %%%%
% Вызов функции: 
%\myfigure{ширина}{файл рисунка}{подпись к рисунку}{ссылка на рисунок}
\newcommand{\myfigure}[5][H]{
    \vspace{3mm}
    \begin{figure}[#1]
        \centering
        \includegraphics[width=#2\linewidth]{#3}
        \captionsetup{justification=centering, format=plain}
        \caption{#4}
        \label{fig:#5}
    \end{figure}
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%% Таблицы %%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{cellspace}              % для ячеек таблиц
\usepackage{array}                  % для таблиц
\usepackage{longtable}              % для длинных таблиц
\usepackage{multirow}               % для совмещенных строк
%\setlength\cellspacetoplimit{14pt} % высота ячеек таблицы

%%%% Настройка подписей таблиц %%%% ИГУ
\DeclareCaptionLabelFormat{gosttable}{\vspace{2mm}\hfillТаблица #2\break}
\DeclareCaptionLabelSeparator{gosttab}{}
\captionsetup[table]{labelformat=gosttable,  labelsep=gosttab,font=normalsize } % подпись обычной таблицы
\captionsetup[longtable]{labelformat=gosttable, labelsep=gosttab, font=normalsize} % подпись длинной таблицы
\captionsetup[table]{skip=3mm, belowskip=2mm} % верхн. нижн. отступ подписи

%%%% Отступ после и до longtable %%%%
\setlength{\LTpost}{0em}
\setlength{\LTpre}{0em}

%%%% Настройка подписей таблиц %%%% ГОСТ 7.32 - 2017
% \DeclareCaptionLabelFormat{gosttable}{Таблица #2}
% \DeclareCaptionLabelSeparator{gost}{---}
% \captionsetup[table]{labelformat=gosttable, font=normalsize }
% \captionsetup[longtable]{labelformat=gosttable, font=normalsize}



%%%%%%%%%%%%%%%%%%%%%%%%%% Библиография %%%%%%%%%%%%%%%%%%%%%%%%%%
% Изменить название главы "Литература" на "Список использованных источников"
\addto\captionsrussian{\renewcommand\bibname{СПИСОК ИСПОЛЬЗОВАННЫХ ИСТОЧНИКОВ}}

%%%% Нумерация списка литературы с точкой %%%%
\makeatletter
\renewcommand\@biblabel[1]{#1.}
\makeatother

%%%% Настройка библиографических списков %%%%
\makeatletter
\renewenvironment{thebibliography}[1]
    {\list{\@biblabel{\@arabic\c@enumiv}}
           {\settowidth\labelwidth{\@biblabel{#1}}
            \leftmargin\labelsep
            \itemindent 1,27cm 
            \@openbib@code
            \usecounter{enumiv}
            \let\p@enumiv\@empty
            \renewcommand\theenumiv{\@arabic\c@enumiv}
            \sloppy
        }
        \setlength{\itemsep}{0pt}
    }
\makeatother



%%%%%%%%%%%%%%%%%%%%%%%%%% Колонтитулы %%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{fancyhdr} % настройка колонтитулов

%%%% Настройка стиля колонтитула для остальных страниц %%%%
\pagestyle{fancy}
\fancyhf{} % Очистить текущие настройки колонтитулов
\fancyfoot[C]{\fontsize{14pt}{14pt}\selectfont\thepage} % Центрирование номера страницы на всех страницах
\setlength{\footskip}{1.7cm}
\renewcommand{\headrulewidth}{0pt} % Убрать черную линию сверху

%%%% Настройка стиля колонтитула для Title.tex %%%%
\fancypagestyle{titlepage}{
    \fancyhf{} % Очистить текущие настройки колонтитулов
    \fancyfoot[C]{\fontsize{14pt}{14pt}\selectfont\bf Иркутск 202*} % Установить текст в нижний колонтитул
    \setlength{\footskip}{1.7cm} % Установить высоту колонтитула
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%% Листинги %%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{xcolor}
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{listingsutf8}

\lstset{
    extendedchars=\true, % для русского языка
    backgroundcolor=\color{white}, % белый фон
    % frame=single, % рамка вокруг кода
    numbers=left, % нумерация строк слева
    numberstyle=\small, % стиль нумерации строк
    numbersep=10pt, % отступ нумерации строк от кода
    breaklines=true, % автоматический перенос строк
    basicstyle=\linespread{1,3}\ttfamily\footnotesize, % базовый стиль шрифта для кода (linespread меняет межстрочный интервал)
    % basicstyle=\linespread{1,3}\ttfamily\fontsize{9pt}{11pt}\selectfont, % если нужен определенный размер шрифта
    captionpos=b, % позиция подписи под кодом
    tabsize=4, % размер табуляции
    showspaces=false, % не отображать пробелы в коде
    showstringspaces=false, % не отображать пробелы в строках
    showtabs=false, % не отображать табуляцию в строках
    keywordstyle=\color{blue}, % стиль ключевых слов
    commentstyle=\color{green!60!black}, % стиль комментариев
    stringstyle=\color{red}, % стиль строк
    breakatwhitespace=false, %
    keepspaces=true, % пробелы в русских комментах
    texcl=true, % раскрасить одностр. комменты на русском
    %linewidth=0.95\textwidth, % ширина листинга
    xleftmargin=0.05\textwidth, % левый отступ листинга
    % другие параметры, если нужно
}

%%%% Функция для отображения листингов %%%%
% Вызов функции: \inputlisting{Имя файла}
\newcommand{\inputlisting}[2]{
\begin{code}
	\inputminted[breaklines=true, framesep=10pt, fontsize=\footnotesize, firstline=1,]{#2}{#1}
\end{code}
}
